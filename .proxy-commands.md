# Proxy Server - Quick Command Reference

## üöÄ Setup Commands

```bash
# Install dependencies
npm install

# Create .env file
echo "GOOGLE_SHEET_DB_URL=your_url_here" > .env
echo "NODE_ENV=development" >> .env
echo "PORT=3000" >> .env
```

## üíª Local Development

```bash
# Start proxy server
npm run server

# Start with auto-reload
npm run server:dev

# Start web app (different terminal)
npm run web

# Test proxy
./test-proxy.sh http://localhost:3000

# Test health endpoint
curl http://localhost:3000/health

# Test GET logs
curl http://localhost:3000/api/proxy
```

## ‚òÅÔ∏è Vercel Deployment

```bash
# Install Vercel CLI
npm install -g vercel

# Login
vercel login

# Deploy (preview)
vercel

# Add environment variable
vercel env add GOOGLE_SHEET_DB_URL

# Deploy to production
vercel --prod

# View logs
vercel logs

# List environment variables
vercel env ls

# Remove environment variable
vercel env rm GOOGLE_SHEET_DB_URL
```

## üß™ Testing

```bash
# Test script (local)
./test-proxy.sh http://localhost:3000

# Test script (production)
./test-proxy.sh https://your-app.vercel.app

# Manual tests
curl https://your-app.vercel.app/health
curl https://your-app.vercel.app/api/proxy
```

## üêõ Debugging

```bash
# Check if .env is loaded
cat .env

# Check port 3000 is free
lsof -i:3000

# Kill process on port 3000
lsof -ti:3000 | xargs kill -9

# Check Vercel environment variables
vercel env ls

# View function logs
vercel logs [deployment-url]

# View real-time logs
vercel logs --follow
```

## üìù Common Tasks

### Update Environment Variable

**Local:**
```bash
# Edit .env file
nano .env  # or use your editor
# Restart server
npm run server
```

**Vercel:**
```bash
vercel env rm GOOGLE_SHEET_DB_URL
vercel env add GOOGLE_SHEET_DB_URL
vercel --prod  # Redeploy
```

### Check Server Status

```bash
# Local
curl http://localhost:3000/health

# Production
curl https://your-app.vercel.app/health
```

### View Logs

```bash
# Local (in terminal where server is running)
# Logs appear automatically

# Production
vercel logs
vercel logs --follow  # Real-time
```

### Restart Everything

```bash
# Kill all processes
pkill -f "node server.js"
pkill -f "expo"

# Restart proxy
npm run server

# Restart expo (different terminal)
npm start
```

## üîó Useful URLs

**Local:**
- Health: http://localhost:3000/health
- Proxy: http://localhost:3000/api/proxy
- Web App: http://localhost:19006 (or port from Expo)

**Production:**
- Health: https://your-app.vercel.app/health
- Proxy: https://your-app.vercel.app/api/proxy
- Web App: https://your-app.vercel.app

## üìö Documentation Links

- **Quick Start:** [QUICK_START.md](./QUICK_START.md)
- **Full Guide:** [PROXY_DEPLOYMENT.md](./PROXY_DEPLOYMENT.md)
- **Environment:** [ENV_SETUP.md](./ENV_SETUP.md)
- **Architecture:** [ARCHITECTURE.md](./ARCHITECTURE.md)
- **Summary:** [IMPLEMENTATION_SUMMARY.md](./IMPLEMENTATION_SUMMARY.md)

## üÜò Common Issues

| Issue | Solution |
|-------|----------|
| Port 3000 in use | `lsof -ti:3000 \| xargs kill -9` |
| .env not loading | Check file exists: `cat .env` |
| Vercel env missing | `vercel env add GOOGLE_SHEET_DB_URL` |
| Need to redeploy | `vercel --prod` |
| Check logs | `vercel logs` |
| ES module errors | See [ES_MODULE_FIX.md](./ES_MODULE_FIX.md) |
| Build failing | Make sure config files are `.cjs` |

---

**üí° Tip:** Bookmark this file for quick reference!

